<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookie Banner Test - Complyo</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        h1 { color: #333; }
        .test-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        button {
            background: #6366f1;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #4f46e5; }
        code {
            background: #f3f4f6;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 13px;
        }
    </style>
</head>
<body>
    <h1>üç™ Cookie Banner Test</h1>
    
    <div class="test-section">
        <h2>Test-Aktionen</h2>
        <button onclick="window.complyo.openPreferences()">Einstellungen √∂ffnen</button>
        <button onclick="window.complyo.showBanner()">Banner neu anzeigen</button>
        <button onclick="window.complyo.revokeConsent()">Consent widerrufen</button>
        <button onclick="console.log(window.complyo.getConsent())">Consent in Console loggen</button>
    </div>
    
    <div class="test-section">
        <h2>Aktuelle Einwilligung</h2>
        <pre id="consent-display">Wird geladen...</pre>
    </div>
    
    <div class="test-section">
        <h2>Externe Inhalte (werden blockiert)</h2>
        <p>Diese Inhalte werden erst nach Einwilligung geladen:</p>
        
        <h3>YouTube Video</h3>
        <iframe 
            data-complyo-consent="marketing" 
            data-src="https://www.youtube.com/embed/dQw4w9WgXcQ" 
            width="560" height="315" 
            style="border: 1px dashed #ccc; background: #f9f9f9;">
        </iframe>
        
        <h3>Google Analytics Script</h3>
        <script type="text/plain" data-complyo-consent="analytics" data-src="https://www.google-analytics.com/analytics.js"></script>
        <p><code>Google Analytics wird nach Einwilligung geladen</code></p>
    </div>
    
    <script>
        // Update consent display
        function updateConsentDisplay() {
            const consent = window.complyo ? window.complyo.getConsent() : null;
            document.getElementById('consent-display').textContent = 
                consent ? JSON.stringify(consent, null, 2) : 'Keine Einwilligung erteilt';
        }
        
        // Listen for consent changes
        window.addEventListener('complyoConsent', (e) => {
            console.log('Consent ge√§ndert:', e.detail);
            updateConsentDisplay();
        });
        
        // Initial update after banner loads
        setTimeout(updateConsentDisplay, 1000);
    </script>
    
    <!-- Complyo Cookie Banner -->
    <script src="http://localhost:8002/api/widgets/cookie-compliance.js" data-site-id="test-site"></script>
</body>
</html>
